name: Teams Notification

on:
  push:
    branches: [ main, develop, fujiwara/feature/teamsnotice ]
  pull_request:
    branches: [ main, develop ]
jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Notify to Microsoft Teams via webhook
        run: |
          curl -H "Content-Type: application/json" -d '{
            "type": "message",
            "attachments": [
              {
                "contentType": "application/vnd.microsoft.card.adaptive",
                "contentUrl": null,
                "content": {
                  "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
                  "type": "AdaptiveCard",
                  "version": "1.2",
                  "body": [
                    {
                      "type": "TextBlock",
                      "size": "Large",
                      "weight": "Bolder",
                      "text": "üöÄ GitHub Actions ÈÄöÁü•"
                    },
                    {
                      "type": "FactSet",
                      "facts": [
                        {
                          "title": "„É™„Éù„Ç∏„Éà„É™",
                          "value": "${{ github.repository }}"
                        },
                        {
                          "title": "„Éñ„É©„É≥„ÉÅ",
                          "value": "${{ github.ref_name }}"
                        },
                        {
                          "title": "„Ç§„Éô„É≥„Éà",
                          "value": "${{ github.event_name }}"
                        },
                        {
                          "title": "ÂÆüË°åËÄÖ",
                          "value": "${{ github.actor }}"
                        },
                        {
                          "title": "„Çπ„ÉÜ„Éº„Çø„Çπ",
                          "value": "${{ job.status }}"
                        },
                        {
                          "title": "„Ç≥„Éü„ÉÉ„Éà„É°„ÉÉ„Çª„Éº„Ç∏",
                          "value": "${{ github.event.head_commit.message }}"
                        }
                      ]
                    }
                  ]
                }
              }
            ]
          }' "${{ secrets.TEAMS_WEBHOOK }}"
