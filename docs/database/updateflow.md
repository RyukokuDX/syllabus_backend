# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ›´æ–°æ‰‹é †æ›¸

[readmeã¸](../../README.md) | [doc.mdã¸](../doc.md)

## ç›®æ¬¡
0. [å³å¸­æ›´æ–°æ‰‹é †](#å³å¸­æ›´æ–°æ‰‹é †)
1. [æ¦‚è¦](#æ¦‚è¦)
2. [å‰ææ¡ä»¶](#å‰ææ¡ä»¶)
3. [æ›´æ–°ã®æµã‚Œ](#æ›´æ–°ã®æµã‚Œ)
4. [è©³ç´°æ‰‹é †](#è©³ç´°æ‰‹é †)
5. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

## å³å¸­æ›´æ–°æ‰‹é †
- `update/sample/`å†…ã®æ›´æ–°ã—ãŸã„ãƒ†ãƒ¼ãƒ–ãƒ«åã®ã‚µãƒ³ãƒ—ãƒ«jsonã‚’`update/{table}/add/`ã«ç§»å‹•
- è¨­ç½®ã—ãŸjsonã«è¿½åŠ ã—ãŸã„å†…å®¹ã‚’è¿½è¨˜
- developã«pushã—ã¦pull requestã‚’å‡ºã™
- ç®¡ç†è€…ãŒï¼¤ï¼¢ã‚’æ›´æ–°ï¼

## æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€ã‚·ãƒ©ãƒã‚¹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ›´æ–°æ‰‹é †ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°ã¯ã€JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã—ã€Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’å†èµ·å‹•ã™ã‚‹ã“ã¨ã§è¡Œã„ã¾ã™ã€‚
ä¸Šè¨˜ã‚ˆã‚Šã‚‚è¤‡é›‘ãªç‚ºã€ç§»è¡Œã®æ–‡ç« ã¯æ›´æ–°å¾Œã®DBã¾ã§ç¢ºèªã—ãŸã„äººå‘ã‘ã§ã™ã€‚

### ç›®çš„
- ã‚·ãƒ©ãƒã‚¹ãƒ‡ãƒ¼ã‚¿ã®å®‰å…¨ãªæ›´æ–°
- æ›´æ–°å±¥æ­´ã®ç®¡ç†
- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®å¯¾å¿œ

### ç‰¹å¾´
- JSONãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ç®¡ç†
- Dockerã«ã‚ˆã‚‹ç’°å¢ƒåˆ†é›¢
- æ‰‹å‹•ç¢ºèªã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ç¢ºä¿

## å‰ææ¡ä»¶

### å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢
- Docker Desktop
- Python 3.8ä»¥ä¸Š
- Visual Studio Codeï¼ˆæ¨å¥¨ï¼‰

### å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«
- `.env.sample`ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆã¾ãŸã¯`.env`ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- æ›´æ–°ç”¨ã®JSONãƒ•ã‚¡ã‚¤ãƒ«

## æ›´æ–°ã®æµã‚Œ

1. ç’°å¢ƒã®æº–å‚™
2. JSONãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®
3. Dockerã‚³ãƒ³ãƒ†ãƒŠã®å†èµ·å‹•
4. æ›´æ–°ã®ç¢ºèª

## è©³ç´°æ‰‹é †

### 1. ç’°å¢ƒã®æº–å‚™

#### 1-1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¯ãƒ­ãƒ¼ãƒ³ï¼ˆåˆå›ã®ã¿ï¼‰
```bash
git clone https://github.com/yourusername/syllabus_backend.git
cd syllabus_backend
```

#### 1-2. ç’°å¢ƒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™
1. `.env.sample`ã‚’`docker/postgresql/.env`ã«ã‚³ãƒ”ãƒ¼
```bash
cd docker/postgresql
copy .env.sample .env
```

### 2. JSONãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®

#### 2-1. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®ç¢ºèª
æ›´æ–°ç”¨JSONãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã—ã¾ã™ï¼š
```
updates/
â””â”€â”€ subject/
    â”œâ”€â”€ add/      # æ–°è¦è¿½åŠ ãƒ‡ãƒ¼ã‚¿
    â”œâ”€â”€ update/   # æ›´æ–°ãƒ‡ãƒ¼ã‚¿
    â””â”€â”€ delete/   # å‰Šé™¤ãƒ‡ãƒ¼ã‚¿
```

#### 2-2. JSONãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼
```json
{
  "content": {
    "subject_code": "AB1234",
    "subject_name": "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åŸºç¤",
    "credit": 2,
    "created_at": "2024-03-20T10:00:00",
    "updated_at": "2024-03-20T10:00:00"
  }
}
```

#### 2-3. ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®
1. æ›´æ–°å†…å®¹ã«å¿œã˜ã¦é©åˆ‡ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é¸æŠ
   - æ–°è¦è¿½åŠ  â†’ `updates/subject/add/`
   - æ›´æ–° â†’ `updates/subject/update/`
   - å‰Šé™¤ â†’ `updates/subject/delete/`

2. JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®
   - ãƒ•ã‚¡ã‚¤ãƒ«åã¯ä»»æ„ï¼ˆä¾‹ï¼š`subject_001.json`ï¼‰
   - è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®ã‚‚å¯èƒ½

### 3. Dockerã‚³ãƒ³ãƒ†ãƒŠã®å†èµ·å‹•

#### 3-1. ç¾åœ¨ã®ã‚³ãƒ³ãƒ†ãƒŠã®åœæ­¢
```bash
cd docker/postgresql
docker compose down
```

#### 3-2. ã‚³ãƒ³ãƒ†ãƒŠã®å†èµ·å‹•
```bash
docker compose up -d
```

### 4. æ›´æ–°ã®ç¢ºèª

#### 4-1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®æ¥ç¶š
```bash
# admin_userã¨ã—ã¦æ¥ç¶š
psql -h localhost -p 5432 -U admin_user -d syllabus_db
```

#### 4-2. ãƒ‡ãƒ¼ã‚¿ã®ç¢ºèª
```sql
-- æ›´æ–°ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã®ç¢ºèª
SELECT * FROM subject WHERE updated_at > CURRENT_DATE - INTERVAL '1 day';

-- ç‰¹å®šã®ç§‘ç›®ã‚³ãƒ¼ãƒ‰ã®ç¢ºèª
SELECT * FROM subject WHERE subject_code = 'AB1234';
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•ã‚¨ãƒ©ãƒ¼
1. ãƒ­ã‚°ã®ç¢ºèª
```bash
docker logs postgresql-db
```

2. ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•
- ãƒãƒ¼ãƒˆç«¶åˆ
  ```bash
  # ä½¿ç”¨ä¸­ã®ãƒãƒ¼ãƒˆã®ç¢ºèª
  netstat -ano | findstr :5432
  ```
- æ¨©é™ã‚¨ãƒ©ãƒ¼
  - `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®šã‚’ç¢ºèª
  - Dockerã®å†èµ·å‹•ã‚’è©¦ã™

### ãƒ‡ãƒ¼ã‚¿æ›´æ–°ã‚¨ãƒ©ãƒ¼
1. JSONãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼ç¢ºèª
   - å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å­˜åœ¨ç¢ºèª
   - æ—¥ä»˜å½¢å¼ã®ç¢ºèª
   - æ–‡å­—ã‚³ãƒ¼ãƒ‰ã®ç¢ºèªï¼ˆUTF-8ï¼‰

2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®çŠ¶æ…‹ç¢ºèª
```sql
-- ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ã®ç¢ºèª
\d subject

-- ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ç¢ºèª
SELECT * FROM error_log ORDER BY created_at DESC LIMIT 10;
```

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ãƒªã‚¹ãƒˆã‚¢
```bash
# æ›´æ–°å‰ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
docker exec postgresql-db pg_dump -U admin_user syllabus_db > backup_before_update.sql

# å•é¡Œç™ºç”Ÿæ™‚ã®ãƒªã‚¹ãƒˆã‚¢
cat backup_before_update.sql | docker exec -i postgresql-db psql -U admin_user -d syllabus_db
```

## è£œè¶³ï¼šãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®æ‰‹é †ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

1. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆ
```bash
python src/db/migrations/generate_migration.py
```

2. ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
```bash
ls -l docker/postgresql/init/migrations/
```

ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠå†èµ·å‹•æ™‚ã«è‡ªå‹•çš„ã«é©ç”¨ã•ã‚Œã¾ã™ã€‚

## 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ ã®æ›´æ–°æ‰‹é †

### 1.1 ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã®åŸºæœ¬ãƒ•ãƒ­ãƒ¼

1. **å¤‰æ›´å†…å®¹ã®ç¢ºèª**
   - `docs/database/structure.md`ã®æ›´æ–°å±¥æ­´ã«å¤‰æ›´å†…å®¹ã‚’è¨˜éŒ²
   - `docs/database/er.md`ã®ERå›³ã‚’æ›´æ–°
   - å¤‰æ›´å†…å®¹ã®å½±éŸ¿ç¯„å›²ã‚’ç¢ºèª

2. **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆ**
   ```bash
   # src/db/migrationsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
   python generate_migration.py
   ```
   - ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãã®SQLãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹
   - ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯`src/db/migrations/`ã«ä¿å­˜

3. **åˆæœŸåŒ–SQLã®æ›´æ–°**
   - `docker/postgresql/init/init.sql.template`ã‚’æ›´æ–°
   - `docker/postgresql/generate_init.sh`ã‚’å®Ÿè¡Œã—ã¦
   `docker/postgresql/init/init.sql`ã‚’ä½œæˆ
   - ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã€åˆ¶ç´„ã‚’æœ€æ–°ã®çŠ¶æ…‹ã«åæ˜ 

4. **ãƒ¢ãƒ‡ãƒ«ã®æ›´æ–°**
   - `src/db/models.py`ã®SQLAlchemyãƒ¢ãƒ‡ãƒ«ã‚’æ›´æ–°
   - ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã®å®šç¾©ã‚‚å¿…è¦ã«å¿œã˜ã¦æ›´æ–°

5. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œé–¢æ•°ã®æ›´æ–°**
   - `src/db/database.py`ã®é–¢æ•°ã‚’æ›´æ–°
   - æ–°ã—ã„ã‚«ãƒ©ãƒ ã‚„ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾å¿œã™ã‚‹å‡¦ç†ã‚’è¿½åŠ 

### 1.2 å…·ä½“çš„ãªå¤‰æ›´ãƒ‘ã‚¿ãƒ¼ãƒ³

#### ãƒ†ãƒ¼ãƒ–ãƒ«åã®å¤‰æ›´
1. æ–°ã—ã„ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ
2. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’ç§»è¡Œ
3. å¤ã„ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤
4. é–¢é€£ã™ã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨åˆ¶ç´„ã‚’æ›´æ–°

#### ã‚«ãƒ©ãƒ åã®å¤‰æ›´
1. æ–°ã—ã„ã‚«ãƒ©ãƒ ã‚’è¿½åŠ 
2. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’ç§»è¡Œ
3. å¤ã„ã‚«ãƒ©ãƒ ã‚’å‰Šé™¤
4. é–¢é€£ã™ã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨åˆ¶ç´„ã‚’æ›´æ–°

#### ã‚«ãƒ©ãƒ å‹ã®å¤‰æ›´
1. ä¸€æ™‚çš„ãªã‚«ãƒ©ãƒ ã‚’è¿½åŠ 
2. ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›ã—ã¦ç§»è¡Œ
3. å¤ã„ã‚«ãƒ©ãƒ ã‚’å‰Šé™¤
4. ä¸€æ™‚çš„ãªã‚«ãƒ©ãƒ ã®åå‰ã‚’å¤‰æ›´

#### åˆ¶ç´„ã®è¿½åŠ /å¤‰æ›´
1. æ—¢å­˜ã®åˆ¶ç´„ã‚’å‰Šé™¤ï¼ˆå¿…è¦ãªå ´åˆï¼‰
2. æ–°ã—ã„åˆ¶ç´„ã‚’è¿½åŠ 
3. ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã‚’ç¢ºèª

### 1.3 æ³¨æ„äº‹é …

- æœ¬ç•ªç’°å¢ƒã§ã®å¤‰æ›´ã¯å¿…ãšãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–å¾—
- å¤‰æ›´ã¯æ®µéšçš„ã«è¡Œã„ã€å„æ®µéšã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½
- ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †ã‚’äº‹å‰ã«æº–å‚™
- å¤‰æ›´å†…å®¹ã‚’ãƒãƒ¼ãƒ å†…ã§å…±æœ‰
- å¤‰æ›´å±¥æ­´ã‚’è©³ç´°ã«è¨˜éŒ²

## 2. ãƒ‡ãƒ¼ã‚¿æ›´æ–°ã®æ‰‹é †

### 2.1 æ–°è¦ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ 

1. **JSONãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™**
   - `updates/{ãƒ†ãƒ¼ãƒ–ãƒ«å}/add/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®
   - ãƒ•ã‚¡ã‚¤ãƒ«åã¯`{ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—}_{ãƒ†ãƒ¼ãƒ–ãƒ«å}.json`ã®å½¢å¼

2. **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆ**
   ```bash
   # src/db/migrationsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
   python generate_migration.py
   ```

3. **ç”Ÿæˆã•ã‚ŒãŸSQLã®ç¢ºèª**
   - `src/db/migrations/`ã«ç”Ÿæˆã•ã‚ŒãŸSQLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
   - ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã‚’ãƒã‚§ãƒƒã‚¯

4. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®é©ç”¨**
   - ç”Ÿæˆã•ã‚ŒãŸSQLã‚’å®Ÿè¡Œ
   - å®Ÿè¡Œçµæœã‚’ç¢ºèª

### 2.2 æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°

1. **æ›´æ–°ç”¨JSONãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™**
   - `updates/{ãƒ†ãƒ¼ãƒ–ãƒ«å}/update/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®
   - æ›´æ–°å¯¾è±¡ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç‰¹å®šã™ã‚‹ã‚­ãƒ¼ã‚’å«ã‚ã‚‹

2. **æ›´æ–°ç”¨SQLã®ç”Ÿæˆ**
   - `generate_migration.py`ã‚’å®Ÿè¡Œã—ã¦æ›´æ–°ç”¨SQLã‚’ç”Ÿæˆ
   - ç”Ÿæˆã•ã‚ŒãŸSQLã®å†…å®¹ã‚’ç¢ºèª

3. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®é©ç”¨**
   - æ›´æ–°ç”¨SQLã‚’å®Ÿè¡Œ
   - æ›´æ–°çµæœã‚’ç¢ºèª

### 2.3 ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤

1. **å‰Šé™¤å¯¾è±¡ã®ç‰¹å®š**
   - å‰Šé™¤ã™ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã®æ¡ä»¶ã‚’æ˜ç¢ºåŒ–
   - é–¢é€£ã™ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å½±éŸ¿ã‚’ç¢ºèª

2. **å‰Šé™¤ç”¨SQLã®ç”Ÿæˆ**
   - å‰Šé™¤æ¡ä»¶ã«åŸºã¥ã„ã¦SQLã‚’ç”Ÿæˆ
   - å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’è€ƒæ…®

3. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ã®å‰Šé™¤**
   - å‰Šé™¤ç”¨SQLã‚’å®Ÿè¡Œ
   - å‰Šé™¤çµæœã‚’ç¢ºèª

## 3. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ãƒªã‚¹ãƒˆã‚¢

### 3.1 ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®å–å¾—

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
pg_dump -U postgres syllabus > backup_$(date +%Y%m%d).sql

# ã‚¹ã‚­ãƒ¼ãƒã®ã¿ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
pg_dump -U postgres --schema-only syllabus > schema_$(date +%Y%m%d).sql
```

### 3.2 ãƒªã‚¹ãƒˆã‚¢æ‰‹é †

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¹ãƒˆã‚¢
psql -U postgres syllabus < backup_YYYYMMDD.sql

# ã‚¹ã‚­ãƒ¼ãƒã®ã¿ã®ãƒªã‚¹ãƒˆã‚¢
psql -U postgres syllabus < schema_YYYYMMDD.sql
```

## 4. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 4.1 ä¸€èˆ¬çš„ãªå•é¡Œ

1. **å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„é•å**
   - å‚ç…§å…ˆã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
   - å¿…è¦ã«å¿œã˜ã¦å‚ç…§å…ˆã®ãƒ‡ãƒ¼ã‚¿ã‚’å…ˆã«è¿½åŠ 

2. **ä¸€æ„åˆ¶ç´„é•å**
   - é‡è¤‡ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒãªã„ã“ã¨ã‚’ç¢ºèª
   - å¿…è¦ã«å¿œã˜ã¦æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°

3. **å‹å¤‰æ›ã‚¨ãƒ©ãƒ¼**
   - ãƒ‡ãƒ¼ã‚¿å‹ã®äº’æ›æ€§ã‚’ç¢ºèª
   - å¿…è¦ã«å¿œã˜ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›

### 4.2 ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †

1. **æœ€æ–°ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ç¢ºèª**
2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒªã‚¹ãƒˆã‚¢**
3. **å¤‰æ›´ã‚’å…ƒã«æˆ»ã™**
4. **ã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œã‚’ç¢ºèª**

## 5. ç›£è¦–ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

### 5.1 å®šæœŸçš„ãªç¢ºèªé …ç›®

- ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚µã‚¤ã‚ºã¨æˆé•·ç‡
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä½¿ç”¨çŠ¶æ³
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‚¾å‘
- ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ç¢ºèª

### 5.2 æœ€é©åŒ–ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°

- ãƒ†ãƒ¼ãƒ–ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãããªã£ãŸå ´åˆ
- ã‚¯ã‚¨ãƒªã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒä½ä¸‹ã—ãŸå ´åˆ
- æ–°ã—ã„ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒå¿…è¦ãªå ´åˆ
- ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã«å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ

[ğŸ” ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã¸](#ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ›´æ–°æ‰‹é †æ›¸)