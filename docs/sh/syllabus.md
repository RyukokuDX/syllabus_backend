# syllabus.sh

[readmeへ](../README.md) | [ドキュメント作成ガイドラインへ](../doc.md)

メインのシェルスクリプト。PostgreSQLとFastAPIサービスの管理を統一的に行うためのインターフェースを提供します。

## 目次
1. [使用方法](#使用方法)
2. [オプション](#オプション)
3. [コマンド](#コマンド)
4. [使用例](#使用例)
5. [注意事項](#注意事項)
6. [関連スクリプト](#関連スクリプト)
7. [更新履歴](#更新履歴)

## 使用方法

```bash
./syllabus.sh [OPTIONS] COMMAND [ARGS]
```

### オプション

- `-p, --postgres`: PostgreSQLサービスを操作
- `-h, --help`: ヘルプメッセージを表示

### コマンド

#### 基本コマンド

- `help`: ヘルプメッセージを表示
- `venv-init`: Python仮想環境の初期化
- `up`: すべてのサービスを起動
- `down`: すべてのサービスを停止
- `ps`: サービスの状態を表示
- `logs`: サービスのログを表示

#### PostgreSQL関連

- `shell`: PostgreSQLサービスのシェルを開く（-pオプション必須）
- `records`: すべてのテーブルのレコード数を表示、または指定テーブルの全件表示（-pオプション必須）

  - 引数なし: 全テーブルのレコード数を表示
  - `records {テーブル名}`: 指定テーブルの全レコードを表示

#### パーサー関連

- `parser`: 指定されたテーブルのパーサースクリプトを実行
  - 利用可能なパーサー:
    - `book` または `06`: 書籍パーサー
    - `syllabus` または `17`: シラバスパーサー

### 使用例

```bash
# Python仮想環境の初期化
./syllabus.sh venv-init

# すべてのサービスの起動
./syllabus.sh up

# PostgreSQLシェルの起動
./syllabus.sh -p shell

# テーブルのレコード数表示
./syllabus.sh -p records

# facultyテーブルの全件表示
./syllabus.sh -p records faculty

# パーサーの実行
./syllabus.sh parser book
./syllabus.sh parser syllabus
```

## 注意事項

- PostgreSQLの操作（shell/records）を行う場合は、必ず`-p`オプションを指定してください
- パーサーを実行する前に、`venv-init`コマンドでPython仮想環境を初期化してください
- 各コマンドは`bin/`ディレクトリ内の対応するスクリプトを実行します
- エラーが発生した場合は、適切なエラーメッセージとヘルプが表示されます

## 関連スクリプト

### パーサー関連
- [parser.sh](./parser.md) - パーサースクリプトの実行

## 更新履歴

| 日付 | バージョン | 更新者 | 内容 |
|------|------------|--------|------|
| 2024-03-20 | 1.0.0 | 開発者名 | 初版作成 |
| 2024-03-21 | 1.1.0 | 開発者名 | Python仮想環境のサポートを追加、コマンド構造を整理 |

[🔝 ページトップへ](#syllabussh) 